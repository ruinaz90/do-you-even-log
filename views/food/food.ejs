<%- include("../partials/header.ejs") %>
<%- include("../partials/nav.ejs") %>
<%- include("../partials/container.ejs") %>

<h1 class="text-3xl mb-4">Food</h1>

<p><a href="/food/add" class="inline-block bg-dyelred2 px-4 py-2 mb-2 rounded-lg text-sm font-semibold text-white hover:bg-red-700">Add food</a></p>

<section class="grid lg:grid-cols-3 sm:grid-cols-1 gap-4">
<!-- loop through dates in exercise list -->
    <% for(let food of foods) { %>
        <div class="bg-white rounded drop-shadow-md border border-gray-200 p-2">
            <!-- display date -->
            <h2 class="text-sm font-medium text-dyelred2 mb-4"><%= food['_id'] %></h2>

            <!-- display total calories and protein if they exist -->
            <% if(food['totalCals'] > 0) { %>
                <h2 class="text-sm font-medium text-dyelred2">Total calories: <%= food['totalCals'] %></h2>
            <% } %>
            <% if(food['totalProtein'] > 0) { %>
                <h2 class="text-sm font-medium text-dyelred2 mb-4">Total protein: <%= food['totalProtein'] %>g</h2>
            <% } %>

            <!-- food items for each meal -->
            <h3 class="text-lg font-medium">Breakfast</h3>
            <% for(let foodItem of food['records']) { %>
                <% if(foodItem['meal'] == "Breakfast") { %>
                    <p class="text-sm text-gray-500 text-base whitespace-pre-line"><%= foodItem['food'] %></p>
                    <% if(foodItem['calories']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Calories: <%= foodItem['calories'] %></p>
                    <% } %>
                    <% if(foodItem['protein']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Protein: <%= foodItem['protein'] %>g</p>
                    <% } %>
                    <p class="mt-1.5 mb-2"><a href="/food/edit/<%= foodItem['_id'] %>" class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold">Edit</a></p>
                <% } %> 
            <% } %>
            
            <h3 class="text-lg font-medium">Lunch</h3>
            <% for(let foodItem of food['records']) { %>
                <% if(foodItem['meal'] == "Lunch") { %>
                    <p class="text-sm text-gray-500 text-base whitespace-pre-line"><%= foodItem['food'] %></p>
                    <% if(foodItem['calories']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Calories: <%= foodItem['calories'] %></p>
                    <% } %>
                    <% if(foodItem['protein']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Protein: <%= foodItem['protein'] %>g</p>
                    <% } %>
                    <p class="mt-1.5 mb-2"><a href="/food/edit/<%= foodItem['_id'] %>" class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold">Edit</a></p>
                <% } %> 
            <% } %>

            <h3 class="text-lg font-medium">Dinner</h3>
            <% for(let foodItem of food['records']) { %>
                <% if(foodItem['meal'] == "Dinner") { %>
                    <p class="text-sm text-gray-500 text-base whitespace-pre-line"><%= foodItem['food'] %></p>
                    <% if(foodItem['calories']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Calories: <%= foodItem['calories'] %></p>
                    <% } %>
                    <% if(foodItem['protein']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Protein: <%= foodItem['protein'] %>g</p>
                    <% } %>
                    <p class="mt-1.5 mb-2"><a href="/food/edit/<%= foodItem['_id'] %>" class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold">Edit</a></p>
                <% } %> 
            <% } %>

            <h3 class="text-lg font-medium">Snacks</h3>
            <% for(let foodItem of food['records']) { %>
                <% if(foodItem['meal'] == "Snacks") { %>
                    <p class="text-sm text-gray-500 text-base whitespace-pre-line"><%= foodItem['food'] %></p>
                    <% if(foodItem['calories']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Calories: <%= foodItem['calories'] %></p>
                    <% } %>
                    <% if(foodItem['protein']) { %>
                        <p class="text-sm text-gray-500 text-base whitespace-pre-line">Protein: <%= foodItem['protein'] %>g</p>
                    <% } %>
                    <p class="mt-1.5 mb-2"><a href="/food/edit/<%= foodItem['_id'] %>" class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold">Edit</a></p>
                <% } %> 
            <% } %> 
        </div>
    <% } %>  
</section>

<%- include("../partials/container-bottom.ejs") %>
<%- include("../partials/footer.ejs") %>